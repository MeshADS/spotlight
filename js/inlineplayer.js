function InlinePlayer(){var a=this,b=this,c=soundManager,d=navigator.userAgent.match(/msie/i);this.playableClass="inline-playable",this.excludeClass="inline-exclude",this.links=[],this.sounds=[],this.soundsByURL=[],this.indexByURL=[],this.lastSound=null,this.soundCount=0,this.config={playNext:!1,autoPlay:!1},this.css={sDefault:"sm2_link",sLoading:"sm2_loading",sPlaying:"sm2_playing",sPaused:"sm2_paused"},this.addEventHandler="undefined"!=typeof window.addEventListener?function(a,b,c){return a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},this.removeEventHandler="undefined"!=typeof window.removeEventListener?function(a,b,c){return a.removeEventListener(b,c,!1)}:function(a,b,c){return a.detachEvent("on"+b,c)},this.classContains=function(a,b){return"undefined"!=typeof a.className&&a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},this.addClass=function(b,c){return!(!b||!c||a.classContains(b,c))&&void(b.className=(b.className?b.className+" ":"")+c)},this.removeClass=function(b,c){return!!(b&&c&&a.classContains(b,c))&&void(b.className=b.className.replace(new RegExp("( "+c+")|("+c+")","g"),""))},this.getSoundByURL=function(b){return"undefined"!=typeof a.soundsByURL[b]?a.soundsByURL[b]:null},this.isChildOfNode=function(a,b){if(!a||!a.parentNode)return!1;b=b.toLowerCase();do a=a.parentNode;while(a&&a.parentNode&&a.nodeName.toLowerCase()!=b);return a.nodeName.toLowerCase()==b?a:null},this.events={play:function(){b.removeClass(this._data.oLink,this._data.className),this._data.className=b.css.sPlaying,b.addClass(this._data.oLink,this._data.className)},stop:function(){b.removeClass(this._data.oLink,this._data.className),this._data.className=""},pause:function(){b.removeClass(this._data.oLink,this._data.className),this._data.className=b.css.sPaused,b.addClass(this._data.oLink,this._data.className)},resume:function(){b.removeClass(this._data.oLink,this._data.className),this._data.className=b.css.sPlaying,b.addClass(this._data.oLink,this._data.className)},finish:function(){if(b.removeClass(this._data.oLink,this._data.className),this._data.className="",b.config.playNext){var a=b.indexByURL[this._data.oLink.href]+1;a<b.links.length&&b.handleClick({target:b.links[a]})}}},this.stopEvent=function(a){return"undefined"!=typeof a&&"undefined"!=typeof a.preventDefault?a.preventDefault():"undefined"!=typeof event&&"undefined"!=typeof event.returnValue&&(event.returnValue=!1),!1},this.getTheDamnLink=d?function(a){return a&&a.target?a.target:window.event.srcElement}:function(a){return a.target},this.handleClick=function(b){if("undefined"!=typeof b.button&&b.button>1)return!0;var d=a.getTheDamnLink(b);if("a"!=d.nodeName.toLowerCase()&&(d=a.isChildOfNode(d,"a"),!d))return!0;d.getAttribute("href");if(!d.href||!c.canPlayLink(d)&&!a.classContains(d,a.playableClass)||a.classContains(d,a.excludeClass))return!0;var f=d.href,g=a.getSoundByURL(f);return g?g==a.lastSound?g.togglePause():(c._writeDebug("sound different than last sound: "+a.lastSound.id),a.lastSound&&a.stopSound(a.lastSound),g.togglePause()):(a.lastSound&&a.stopSound(a.lastSound),g=c.createSound({id:"inlineMP3Sound"+a.soundCount++,url:f,onplay:a.events.play,onstop:a.events.stop,onpause:a.events.pause,onresume:a.events.resume,onfinish:a.events.finish,type:d.type||null}),g._data={oLink:d,className:a.css.sPlaying},a.soundsByURL[f]=g,a.sounds.push(g),g.play()),a.lastSound=g,"undefined"!=typeof b&&"undefined"!=typeof b.preventDefault?b.preventDefault():event.returnValue=!1,!1},this.stopSound=function(a){soundManager.stop(a.id),soundManager.unload(a.id)},this.init=function(){c._writeDebug("inlinePlayer.init()");for(var b=document.getElementsByTagName("a"),d=0,e=0,f=b.length;e<f;e++)!c.canPlayLink(b[e])&&!a.classContains(b[e],a.playableClass)||a.classContains(b[e],a.excludeClass)||(a.addClass(b[e],a.css.sDefault),a.links[d]=b[e],a.indexByURL[b[e].href]=d,d++);d>0&&(a.addEventHandler(document,"click",a.handleClick),a.config.autoPlay&&a.handleClick({target:a.links[0],preventDefault:function(){}})),c._writeDebug("inlinePlayer.init(): Found "+d+" relevant items.")},this.init()}var inlinePlayer=null;soundManager.setup({debugMode:!0,preferFlash:!1,useFlashBlock:!0,url:"../../swf/",flashVersion:9}),soundManager.onready(function(){inlinePlayer=new InlinePlayer});